
Protobufs: http://code.google.com/p/protobuf/
and
Go-rpcgen: https://github.com/kylelemons/go-rpcgen

Look particularly promising.  The above allow for a simple proto file to
generate most of the code ncessary to support RPC based on the proto file.

Example code is already allowing a simple RPC to work over TLS.

Protocol should support the following commands:
* REQUEST - <number of records> 
               <256 bit checksum>
               <size>

            <number of records> legal values 1-256, represents the
                                number of blobs we are requesting 
                                storage for
            <256bit checksum> - checksum
            <size> - blob size

            The request command is sent from a peer that needs a blob
            stored to a peer that will hopefully store blob.  

			If accepted the blob size counts against the requester.

			If the block is already stored on the target it doesn't
            need to be sent.

* REPLY - <number of records>
               <256 bit checksum>
               <reply-status>
           
           Reply allows a peer to respond to a REQUEST.  This isn't on the
           same connection.  Status should be one of:
           Status = 0   I have blob, your are now subscribed to it.
           Status = 1   I don't have that blob, please send it.
           Status = 2   I don't want that blob, try someone else
           Status = 3   I don't accept blobs that big, try someone else
           Status = 4   That violated our agreed on quota, go away
           Status = 5   That vioated our agreed on quota, but I will accept a larger quota trade.

* GET - <number of records>
            <256 checksum>
            <size>
        
        Reply should be a list of:
             <checksum>
	         <size> 
             <status>
             <contents of blob if no error>

        Status = 0 # file available and is being sent
        Status = 1 # file unavailable, try again later
        Status = 2 # file unavailable, it wasn't offered, anonymous gets are turned off.
        Status = 3 # file doesn't exist, no idea


